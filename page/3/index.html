<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.3"/>




  <meta name="keywords" content="slixurd" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.3" />



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    analytics: {
      google: ''
    },
    sidebar: 'post'
  };
</script>




  <title> slixurd </title>
</head>

<body>
  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">slixurd</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<div class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/">
            <i class="menu-item-icon icon-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            <i class="menu-item-icon icon-about"></i> <br />
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            <i class="menu-item-icon icon-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            <i class="menu-item-icon icon-tags"></i> <br />
            标签
          </a>
        </li>
      
    </ul>
  

  
</div>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <div id="posts" class="posts-expand">
    
      
        

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2012/12/26/madoka/">
                魔法少女小圆
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2012-12-26
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2012/12/26/madoka/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/12/26/madoka/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <h2 id="魔法少女小圆">魔法少女小圆</h2><p><img src="http://i.imgur.com/gL1wc.jpg" alt="madoka"></p>
<p>如果说我用什么来判断时间的流逝,那就是每年必来的新番季.历经春夏秋冬两个轮回之后,我终于把小圆补完了.其实当我还在高三挣扎的时候,已经从宿友口中得知小圆,并且看了学姐被吃掉,身体掉下来的那一瞬间.在那以后,每当听见别人赞扬小圆的时候,我当时以为学姐的死就是小圆的全部,并且对小圆很不屑,就像我们都惊异于皇冠的神转折但是还是坚定的人为皇冠只是个渣番一样.我一直以为小圆是不值得补的.(当时错杀的还有石头门)</p>
<p>一年以后,我补完了石头门,被okarin一次一次的无力所震撼,又一年,我补完了小圆,又一次被这种无力的抗争所打动.</p>
<p>homura为了能够拯救madoka不断的倒退时间,去到平行世界的另外一端,一次一次的陪伴小圆,一次一次的绝望,最后变得冷漠,但是依然想去让小圆摆脱必死的命运,对,这里的homura可以替换成okarin,madoka换成mayuri和助手.又或者应该说这一幕更加像未来日记?应该说,能让我感动的,一个是勇往之前,无论什么艰难险阻都克服的热血意外,另外一个就是无论如何都无法摆脱的无力但是却又依然坚持的那份精神(baka)了吧.不过,在这样不停的往复当中,真的不会后悔么,如果当初没有这样做就好了这样的感觉.虽然后悔本身就很不负责任,选择了却不去承担,本来就是很狡猾的事情(觉得这句句子很奇怪的自觉替换成日语来读,然后就很顺口了).也许穿越时空改变世界线本身就是很自私的行为也说不定,为了自己能够让世界照着自己所想象的发展,所以要跨越世界线去寻找自己所期待的世界,遗弃自己所存在的世界线,而去到另外的世界线,如果抱着失败也没有关系最后再换一条线的感觉,那就太糟糕了,世界并不是可以自由选择的东西,而是选择了无论怎样都只能接受的世界.所以自由才成了这个时代的最强音吧,厌恶专政,厌恶独裁,期待民主,期待自由.尽管自由可能会带来好的坏的东西,最后承担这些的都是选择了他的我们而已,如果不好的东西就要再去改变他们,杨威利当初这么说的时候我也没能理解,不过慢慢的总算能理解为什么了.</p>
<p>在一次一次的重复当中最后应该是会失去自我的吧,看到最后的时候我差点以为那只是过去的回忆而已,直到小圆最后站在homura的身前决定再一次称为魔法少女的时候,我才意识到这里是世界的主线.如果这次小圆没有站出来,homura的循环也会到此结束了,即使说了”何度でも缲り返す”,但是最后还是要接受命运的无奈真是让人热血沸腾呢.”就是因为这个我才这么喜欢人类的说”.</p>
<blockquote>
<p>既然要实现他人的愿望，就更应该搞清楚自己追求的是什么，你是希望他能实现你的梦想，还是想借实现他的梦想施恩于他呢。要是没弄清楚这一点，迟早有一天你会后悔的。</p>
</blockquote>
<p>如果说魔法少女是从希望中诞生的话,魔女就是绝望的叹息.魔法少女的诞生存在这巨大的不合理,能够完成一个超乎世界规律的愿望,以此来换取灵魂,将灵魂独立出来.但是世界始终是公平的,希望的诞生也伴随着绝望.一面期待着拯救世人,另外一面确是杀戮的化身.用性命来换取的愿望,不知道有多少人有呢?至少我没有什么牺牲自己也要完成的愿望,我只想就这样活下去而已,虽然没有目标,虽然有很多不满,但是也找不出不合理的地方,已经成为日常的东西连打破也需要很大的勇气才行.如果说这个愿望是为了别人的话,在我看来真的是很不值得吧,为了自己还能说是without compunction.为了别人的话,如果被别人背叛的话,那就会堕落到比任何人都要深的黑暗中去的,鹰之团团长,还有很多很多这样被背叛的人.</p>
<blockquote>
<p>嘛，一定是因为我们两个是笨蛋啦.对，幸福的笨蛋。其实也没什么稀奇的啦，那种就算拼上性命也想要实现的愿望，这个世上也一定有很多人怀抱着这些东西吧，所以找不到这种目标的我们，正好说明了我们不知道那样的痛苦，因为受到了太多的恩泽，所以变成了笨蛋啊 </p>
<p>越是重复，就越是偏离你和我生活过的时间。心意也相互偏离，言语也渐渐无法相通，我想我大概早已迷路了。“要拯救你”这是我最初的心意，而到如今，这是最后留下的唯一路标了</p>
</blockquote>
<p>印象比较深刻的还有生命之树,魔女们,到处都洋溢着一阵EF+EVA的风格,小圆真是一部很值得称赞的作品呢.</p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


      
    
      
        

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2012/12/15/how_to_built_impress/">
                impress.js使用小记
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2012-12-15
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2012/12/15/how_to_built_impress/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/12/15/how_to_built_impress/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <h1 id="前言">前言</h1><p>在偶然的机会下,接触到prezi这样一种展示工具,但是因为庞大的开发套件&amp;收费让我止步,幸运的是,找到了impress.js这样一种替代品,如此精简而又优秀的展示工具.impress.js需要搭配html+Css实现,尽管已经有两三个visual design tool,但是效果差强人意,唯一一个比较满意的就是markdown2impress.不过由于需要实现自己的网页风格,还是决定全部自己写.下面就介绍一个如何设计一个基于impress.js的网页/展示.</p>
<hr>
<blockquote>
<p>首先还是先放官方demo以及我制作的presentation.</p>
<p><a href="http://slixurd2.tk/person/presentation/presentation.html#/start-page" target="_blank" rel="external">demo-slixurd</a> 对内容感兴趣的一样可以进入<a href="http://slixurd2.tk/2012/12/14/opensource/" target="_blank" rel="external">OpenSource</a>查看以及下载</p>
<p><a href="http://bartaz.github.com/impress.js/#/bored" target="_blank" rel="external">demo-official</a></p>
</blockquote>
<hr>
<p>然后..一个JS如何实现一个网页呢?妈妈告诉我们,程序员们最重要的能力就是看源代码,所以当你下意识的点开查看源代码的时候,你已经开始迈出第一步了.原本想翻译作者的源代码的(因为作者把基本步骤都写在源代码里面了),不过看到已经有人翻译了,那二次劳动就免了,<a href="http://eyehere.net/2012/impress-js-chinese-course-tutorial/" target="_blank" rel="external">点击这里阅读eyehere的翻译</a> .鉴于网上的教程都是从一份英文教程翻译而来并且翻译的不知道如何评价.不过由于大体正确,我也没必要继续重复写,我就从另外的角度来讲好了.</p>
<p>就如同作者所说的一样</p>
<blockquote>
<blockquote>
<p>So if you want to build great presentation take a pencil and piece of paper. And turn off the computer.<br>Sketch, draw and write. Brainstorm your ideas on a paper. Try to build a mind-map of what you’d liketo present. It will get you closer and closer to the layout you’ll build later with impress.js.</p>
</blockquote>
</blockquote>
<h2 id="布局">布局</h2><p><img src="http://i.imgur.com/h3frn.jpg" alt="impress"></p>
<p>这是官方demo的布局.首先我们需要知道座标定位所需要的变量,impress.js一共提供了4个主要定位的参数(3d变换不算).</p>
<blockquote>
<p><code>data-x=&quot;3500&quot; //只要学过数学的都应该知道.这是直角座标系(装B的说法是-笛卡儿座标系)</code></p>
<p><code>data-y=&quot;2100&quot; //但是方向不一样,y是以下为正方向的</code></p>
<p><code>data-rotate=&quot;180&quot; //这个是旋转角度</code></p>
<p><code>data-scale=&quot;6&quot;//这个是放大倍数</code></p>
</blockquote>
<p>定位点均为该子页面未缩放及旋转前的左上角,所以我们可以在图上看到座标系的原点.(不是(0,0)标示的位置,而是黑色x轴那里.)我们需要为每一个页面做定位.所以设计在这里就显得很重要了.<br>倍数可以带小数,例如0.001,旋转角度可以是负数,也可以超过360(表示多次旋转),善用缩放和旋转是让presentation出彩的重要一环.所以,离开电脑,好好画一下布局,好好设计才是正道,像我这种做完以后都不敢放overview的千万不要学.</p>
<h2 id="基本结构">基本结构</h2><p>我们直接看全局结构吧,以下是最小结构</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"css/impress-demo.css"</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"impress"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--content start tag --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"first"</span> <span class="attribute">class</span>=<span class="value">"step"</span> <span class="attribute">data-x</span>=<span class="value">"0"</span> <span class="attribute">data-y</span>=<span class="value">"0"</span> <span class="attribute">data-rotate</span>=<span class="value">"180"</span> <span class="attribute">data-scale</span>=<span class="value">"3"</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="title">p</span>&gt;</span>the first try<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--end tag --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/impress.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="ocaml">impress<span class="literal">()</span>.init<span class="literal">()</span>;</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>作为一个网页必须的元素当然都是必须有的,例如最外层的<code>&lt;html&gt;</code>标签,然后其中的<code>&lt;head&gt;</code>和<code>&lt;body&gt;</code>两个标签.谈谈impress.js需要的东西.</p>
<p>第一个:<code>&lt;script src=&quot;js/impress.js&quot;&gt;&lt;/script&gt;//链接js脚本</code></p>
<p>第二个:<code>&lt;script&gt;impress().init();&lt;/script&gt;//这个也可以用他自带的其他api,不过一般init就足够了</code></p>
<p>选择可有:<code>&lt;link href=&quot;css/impress-demo.css&quot; rel=&quot;stylesheet&quot; /&gt;</code></p>
<p>script最好就是直接放在body结束标签前,否则有机率无法载入.css样式表根据自己需要修改,删除,增加.<br>其实实际上,如果想偷懒的话,直接在我所标示的content tag中间加内容就可以了.</p>
<p>鉴于impress.js只支持chrome,safari,ff.所以做不支持的提示是很重要的,因此可以这么写<code>&lt;body class=&quot;impress-not-supported&quot;&gt;</code> 在能够支持的情况下,js会自动替换掉这个class(不信的话用chrome打开网页查看源代码,查看和直接阅读html的区别),无须担心.</p>
<p>最重要的就是#impress这个id,只有查找到这个标签的时候,才会执行impress.js.所以在body标签之后就是一个<code>&lt;div id=&quot;impress&quot;&gt;&lt;/div&gt;</code>的标签,所有的内容都在里面.</p>
<p>然后就进入了子页面,每一个页面都是div,必须有的元素是:.step,x,y.例如上述例子<br><code>&lt;div id=&quot;first&quot; class=&quot;step&quot; data-x=&quot;0&quot; data-y=&quot;0&quot; data-rotate=&quot;180&quot; data-scale=&quot;3&quot;&gt;</code><br>id是这个子页面的名称,最后仅仅只在地址栏有显示,是页面的唯一标识,所以不能够相同.然后是class=”step”同时我们也可以用class=”step slide”这种滑动页面,不过step是必须的,slide是可选的,同时如果自己有编写css,一样可以用自己的class.随后必需的是data-x,data-y.如果没有scale,默认为1,没有角度,默认为0;</p>
<p>另外,作者提供了data-z这个参数,也就是所谓的3d-transform,标示在z轴的位置.效果如同一开始的概览图的12号.另外还有data-rotate-x data-rotate-y  data-rotate-z 这些参数,唯一不同的是,这些的参数的单位是度数.而x,y,z使用的是px.此外还有一些参数感觉没有什么用的就没有解释了,都可以在源代码的注释里找到.</p>
<p>推荐源代码注释和本文都一起读,否则会觉得不知所以.关于css的部分我就不讲解了.我自己的presentation中最主要用的两个类是blurBG和pic.只是简单的圆角+背景+透明度+阴影的组合而已.可以自己尝试搭配,实在不会的话可以搭配各种代码审查(主流浏览器下按F12)查看css并做修改.</p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


      
    
      
        

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2012/12/14/opensource/">
                Open Source展示&impress.js
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2012-12-14
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2012/12/14/opensource/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/12/14/opensource/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p>展示地址:<a href="http://slixurd2.tk/person/presentation/presentation.html#/start-page" target="_blank" rel="external">click here</a></p>
<p>下载地址:<a href="https://github.com/slixurd/slixurd.github.com/tree/master/person/presentation" target="_blank" rel="external">click here(github)</a> 该目录下所有文件都是需要的</p>
<p>注意:包括本站点在内,仅在chrome下测试过,其他浏览器不能保证效果.应该说= =,IE肯定是不行的,国产webkit的壳(例如愚蠢的高速模式还是什么来着也是不行的).</p>
<h1 id="KeyPoint">KeyPoint</h1><ul>
<li>copyright&amp;&amp;copyleft<blockquote>
<p>Open source and copyrights<br>Anything that is not public domain has a copyright, the copyright does not have to be explicit. That is, the authors of a work hold copyright even if there is no copyright notice.</p>
</blockquote>
</li>
</ul>
<ul>
<li>在人们认为有价值的诸多价值之中，自由是最有价值 的一种价值。</li>
</ul>
<h2 id="What_qualifies_as_open_source">What qualifies as open source</h2><p>根据许可的目的，我们可以区别许可证赋予你的各种不同权利。复制和再发布的权利，使用的权利，为个人目的修改的权利，发布修改后的作品的权利。一个许可证可能会对这些权利加上一些限制或给出一些附加条件。</p>
<p>无限制的拷贝权<br>无限制的使用权<br>无限制的针对个人使用目的而修改的权利</p>
<p>For licensing purposes, we can distinguish several different kinds of rights that a license may convey. Rights to copy and redistribute, rights to use, rights to modify for personal use, and rights to redistribute modified copies. A license may restrict or attach conditions to any of these rights.</p>
<p>The Open Source Initiative is the result of a great deal of thought about what makes software <code>open source or (in older terminology)free</code>. Its constraints on licensing require that:</p>
<blockquote>
<p>An unlimited right to copy be granted.</p>
<p>An unlimited right to use be granted.</p>
<p>An unlimited right to modify for personal use be granted.</p>
<p>　　“自由软件”　实际上指的是一种自由，而不是价格。</p>
<p>　　“自由软件”　中的自由是指用户运行、拷贝、研究、改进软件的自由。 </p>
<p>　　“自由软件”　使用“copyleft”来合法地保护每个人的自由。 </p>
</blockquote>
<h2 id="CopyRight_版权">CopyRight 版权</h2><p>Copyright is a legal concept,giving the creator of an original work exclusive rights to it, usually for a limited time.Generally, it is “the right to copy”, but also gives the copyright holder the right to be credited for the work, to determine who may adapt the work to other forms, who may perform the work, who may financially benefit from it, and other related rights.</p>
<blockquote>
<p>Copyright was invented after the advent of the printing press and with wider public literacy.  its origins in Britain were from a reaction to printers at the beginning of the 18th century.</p>
<p>YOU CAN NOT :publish without authorized,publish if after modifying,copy</p>
</blockquote>
<h2 id="public_domain_公有领域">public domain 公有领域</h2><p>Works in the public domain are those whose intellectual property rights have expired</p>
<p>Public domain works can serve as the foundation for new creative works and can be quoted extensively. They can also be copied and distributed to classes or digitized and placed on course Web pages without permission or paying royalties. </p>
<h2 id="copyleft_反版权">copyleft 反版权</h2><p><a href="http://www.gnu.org/licenses/licenses.en.html" target="_blank" rel="external">Copyleft: Pragmatic(务实的) Idealism</a></p>
<blockquote>
<p>Every decision a person makes stems from the person’s values and goals. People can have many different goals and values; fame, profit, love, survival, fun, and freedom, are just some of the goals that a good person might have. When the goal is a matter of principle, we call that idealism.If you want to accomplish something in the world, idealism is not enough—you need to choose a method that works to achieve the goal. In other words, you need to be “pragmatic.”</p>
</blockquote>
<p>一个程序遵循 Copyleft，我们首先声明它是有版权的；然后，我们给它加上发布的规则，这个规则就是一个法律声明，它赋与所有人有使用、修改和重新发布程序的代码 及其衍生作品 的权力，但要求在这个过程中这个发布规则是不可以改变的。这样的话，代码和自由权力在法律上就不可分割了。</p>
<p>商业软件开发人员通过版权剥夺了用户的自由，我们使用版权来给予他它自由。这就是为什么我们把“版权(Copyright)”改称为“Copyleft”。</p>
<h2 id="GPL">GPL</h2><p>隶属copyleft.应该说是copyleft最初的模式之一.<br>在每一程式副本上明顯和恰當地宣告版權聲明和不承擔擔保的聲明,可以為轉讓副本的實際行動收取一定費用。您也可以自由決定是否以提供擔保來換取一定的費用。必須在修改過的檔案中附有明顯的說明,可以以目標碼或可執行形式複製或發佈程式 (可以以目標碼或可執行形式複製或發佈程式 ,如果您修改或發佈程式 (或本程式的衍生作品) ，您就表明您接受這一許可證以及它的所有有關複製、發佈和修改程式或基於程式的作品的條款和條件。您不可以增加任何條款來進一步限制本許可證賦予他們的權利。您也沒有強求第三方履行許可證條款的義務。</p>
<p><code>沒有擔保</code></p>
<blockquote>
<p>Everyone is permitted to copy and distribute verbatim copies<br>of this license document, but changing it is not allowed.</p>
<p>The licenses for most software are designed to take away your freedom to share and change it. By contrast, the GNU General Public License is intended to guarantee your freedom to share and change free software—to make sure the software is free for all its users. This General Public License applies to most of the Free Software Foundation’s software and to any other program whose authors commit to using it. (Some other Free Software Foundation software is covered by the GNU Lesser General Public License instead.) You can apply it to your programs, too.</p>
</blockquote>
<h2 id="MIT">MIT</h2><p>隶属non-copyleft.(copyleft坚持认为在自由软件基础上作修改后的软件，仍旧是自由软件。Non-copyleft许可则不坚持这一点。 proprietary[prə’praiətəri])<br>最宽松的一种开源协议之一.有权利使用、复制、修改、合并、出版发行、散布、再授权及贩售软件及软件的副本。被授权人可根据程序的需要修改许可协议为适当的内容。而需要履行的义务仅仅是在软件和软件的所有副本中都必须包含版权声明和许可声明</p>
<h2 id="BSD">BSD</h2><p>隶属non-copyleft.<br>可以自由使用这些代码，包括修改、再分发.使用并修改、再发布BSD授权的源代码时，新的代码需要附带BSD协议</p>
<blockquote>
<ol>
<li>所有提及该软件特征和使用方法的广告材料必须提示下列的致谢内容：<br>　　“此产品包含有由加利福尼亚大学，柏克利和它的投稿人编制的软件。”</li>
</ol>
</blockquote>
<p>必须保留拷贝权的声明和协议里的软件权利放弃条款。不能使用原作者的商标、名称等用于宣传和市场推广。</p>
<h2 id="Apache协议">Apache协议</h2><p>这些权利可以应用于拷贝权，也可以用于<code>专利权</code>(scope of work)。<br>权利永恒。权利无疆界。授权无需付费和支付酬劳。权利不排他。权利不可变更。</p>
<h2 id="story_of_android">story of android</h2><blockquote>
<p>“Google has taken the Linux kernel, and nothing else from a “traditional” Linux system.<br>Google只用了kernel，别的东西都没用。”</p>
<p>“Android also solves the problem that the phone manufacturers had been having for many years: a free version of Java and a unified application layer that programmers can write to that will work on all phone platforms that integrate it.</p>
</blockquote>
<p>它解决了长期令手机制造商头痛不已的问题：业界缺乏一个开源的Java虚拟机，以及统一的应用程序接口。现在，程序员只要写一次程序，就能在各种手机硬件平台之上使用。”</p>
<p>Kernel和Android的许可证不一样，前者是GPL许可证，后者是Apache许可证.Google有意选择了这样做，并且特意修改Kernel，使得原本应该包括在kernel中的某些功能，都被转移到了userspace之中，因此得以避开开源.Google也放弃了构建一个真正开源的手机系统的机会.这就是Android干的事情：它修改了Kernel，但是又不提供修改的细节，自己搞了一个封闭的系统。说得难听一点，它利用了开源社区，要求开源社区为它做贡献，却又不愿提供回报</p>
<blockquote>
<p><code>http://www.ruanyifeng.com/blog/2010/02/revisiting_android_licenses_continued.html</code></p>
</blockquote>
<h2 id="CC">CC</h2><p>4种基本标识-&gt;组成六种核心协议</p>
<p>署名－非商业使用-禁止演绎 (by-nc-nd)</p>
<p>署名-非商业性使用-相同方式共享 (by-nc-sa)</p>
<p>署名-非商业性使用 (by-nc)</p>
<p>署名-禁止演绎 (by-nd)</p>
<p>署名-相同方式共享 (by-sa)</p>
<p>署名 (by)</p>
<h2 id="Hall_of_Shame">Hall of Shame</h2><p><a href="http://libav.org/shame.html" target="_blank" rel="external">Hall of Shame</a></p>
<p>This is a list of projects, persons or companies violating Libav’s license. The list is part of an effort to raise awareness of license violations and get violators to comply with the licensing terms in order to eventually move them from this Hall of Shame to our Hall of Fame instead.</p>
<h3 id="部分内容参考自以下网站:">部分内容参考自以下网站:</h3><p><a href="http://www.ruanyifeng.com/blog/2010/02/open_android_or_not.html" target="_blank" rel="external">阮一峰 android</a></p>
<p><a href="http://www.gnu.org/" target="_blank" rel="external">GNU</a></p>
<p><a href="http://www.aqee.net/a-short-guide-to-open-source-and-similar-licenses/" target="_blank" rel="external">外刊IT评论</a></p>
<p><a href="http://www.aka.org.cn/Magazine/Gnu/bsd.html" target="_blank" rel="external">aka</a></p>
<p><a href="http://creativecommons.net.cn/" target="_blank" rel="external">CC</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


      
    
      
        

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2012/11/27/myboxybeta_design/">
                MyBoxyBeta 设计模式分析
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2012-11-27
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2012/11/27/myboxybeta_design/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/11/27/myboxybeta_design/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <h1 id="MyBoxyBeta之架构设计">MyBoxyBeta之架构设计</h1><hr>
<h2 id="前言:">前言:</h2><p>这个游戏已经写完很久很久很久了,当时还没有学会用git,版本管理是用最简单的打包src然后标明日期时间,现在看起来真是很幼稚的东西.当时是由两个大二的同学带着刚入大一下学期的我来开始的这个项目,实在是非常感谢.</p>
<p>在简单的设计模式入门以后,才发现他们当时设计的架构已经非常不错了,对于我这样面对对象的新手来说,我当时的任务就是一个码农,由带队的老大设计好整个架构然后分配任务给我,很羞愧的是,我先自己按照功能需求完成细节(具体需求可以看DOC文档),然后再添加接口来匹配上层建筑.拿Mirror_Area,Black_Hole,Exclude_Hole来做例子吧,全部都是派生自Area这一个类的,我写的时候确是将三个具体类先完成,然后看到需要匹配基类,就将写好的类当中的需要独立的功能独立出来放入公共的接口当中.</p>
<p>最后当我们完成整个程序的时候,基本框架的确是对了,但是我们疏忽了一点,性能!对于一个android的机器来说,并没有那么多的性能提供给我们,我们在初始化的时候,每一次的level select都会重新创建对象,最后虽然有释放,但是不管是android的还是java的GC都无法令人满意,我们在接近完成的时候是想修改的,无奈耦合的地方太多,难以修改.然后我们约定,在有限的将来当中,如果还有机会,要重构这个游戏.具体思路很简单,第一次进入游戏的时候就将所有需要用到的对象初始化,以后如果不需要用到,采用隐藏的方式而不是销毁,这样可以避免多次初始化造成的内存爆炸.</p>
<hr>
<h2 id="基本结构">基本结构</h2><p>首先,我们知道android的main入口其实就是Activity,本游戏一共有3个Activity,分别代表3个界面.前两个界面只涉及通过intent的activity的切换,十分简单,不作详解,同时,关于游戏引擎AndEngine也不作讨论,只讨论MyBoxyBetaActivity,即游戏界面.</p>
<p><img src="http://i.imgur.com/qEssM.jpg" alt="IMG"> <img src="http://i.imgur.com/fOVDu.jpg" alt="IMG"> <img src="http://i.imgur.com/TQHA5.jpg" alt="IMG"></p>
<hr>
<h3 id="游戏操作类">游戏操作类</h3><p><img src="http://i.imgur.com/twfc5.jpg" alt="IMG"><br>游戏操作类一共有4个,其中最主要的当然是MyBoxyBetaActivity,控制着其他控制类的的操作,我把它称为controler.下面有3个属于关联关系的操作类,分别是Boxy_GameFinish,Boxy_level,Boxy_refresh.作用一看便知,分别用来结束游戏,初始化关卡,刷新关卡.</p>
<p><img src="http://i.imgur.com/YlwIO.jpg" alt="IMG"></p>
<p>而操作实体我称之为Object.基类Boxy_object拥有接口(interface) CommonFunction. Boxy_object派生3个主要的”实体类型”,分别是区域,板,特殊元件.其中板和特殊元件又是互相关联的.这3个类具体派生的类见UML图.</p>
<p><img src="http://i.imgur.com/Ymfez.jpg" alt="IMG"></p>
<p>为了减少操作类和具体实体类之间的耦合,所以以Boxy_object作为操作类可以直接使用的元素,所有需要生成具体实体都需要依赖Boxy_object这个基类,这样也能强制所有的具体实体都拥有相同的接口以方便初始化,销毁,启用以及休眠.</p>
<p><img src="http://i.imgur.com/howTO.jpg" alt="IMG"></p>
<h3 id="Boxy_level类">Boxy_level类</h3><p>Boxy_level类以一个数组private final static float[] level来储存所有的游戏关卡数据,每次需要初始化就根据当前关卡读取数组就可以了.读取关卡数据结束以后,就进入public void InitialObject()函数,进行具体实体的初始化,这里采用的是简单工厂模式,因为在组合并不多的情况下,没有必要使用抽象工厂或者其他的模式,</p>
<p><img src="http://i.imgur.com/sIWwM.jpg" alt="Init object"></p>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public Boxy<span class="number">_</span>Object[] <span class="keyword">object</span><span class="number">_</span>array=<span class="keyword">new</span> Boxy<span class="number">_</span>Object[level<span class="number">_n</span>um]</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;level<span class="number">_n</span>um;++i)</span><br><span class="line">&#123;</span><br><span class="line">	seeker=level<span class="number">_</span>start<span class="number">_</span>index;</span><br><span class="line">	<span class="keyword">switch</span>((int)level[seeker])</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">		<span class="keyword">object</span><span class="number">_</span>array[i]=(Boxy<span class="number">_</span>Object)<span class="keyword">new</span> Boxy<span class="number">_</span>NormalBoard(..);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">		<span class="keyword">object</span><span class="number">_</span>array[i]=(Boxy<span class="number">_</span>Object)<span class="keyword">new</span> Boxy<span class="number">_</span>WoodBoard(..);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">13</span>:</span><br><span class="line">		<span class="keyword">object</span><span class="number">_</span>array[i]=(Boxy<span class="number">_</span>Object)<span class="keyword">new</span> Boxy<span class="number">_</span>BlackHole(..);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	..</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过这样的工厂类,可以使得MyBoxyBetaActivity本身并不实际与各个具体实体相关联,当需要增加实体个数,种类的时候,只需要在level数据中增加就可以了,虽然并没有做成抽象工厂,但是我们的目的是可以轻松增加游戏关卡,而不是为了模式而作模式.尽管这里违背了开放-封闭原则,但是却依然易于维护,如果盲目增加工厂类,就会造成类数量过多反而不好维护的问题.</p>
<h3 id="Boxy_GameFinish类">Boxy_GameFinish类</h3><p>Boxy_GameFinish类是负责当一个关卡结束的时候,销毁当前所有的实体的(其实这里希望做到的是隐藏,而不是销毁).当然,这个类本身并没有任何能够销毁实体的函数,他所做的仅仅指示发出消息罢了,通过这个消息,然后通知level类进行public void DestroyLevel()随后object基类调用public void destroy()这个函数而已,通过一个消息而监管所有的元素,这里采用的是观察者模式.</p>
<p><img src="http://i.imgur.com/Xwq9l.jpg" alt="destroy object"></p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">DestroyLevel</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> lv_num=(<span class="keyword">int</span>)level[level_start_index];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;lv_num;++i)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span>(object_array[i]!=<span class="keyword">null</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(!object_array[i].isrubbish)</span><br><span class="line">			object_array[i].destroy();</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			object_array[i]=<span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	java.lang.System.gc();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Boxy_refresh">Boxy_refresh</h3><p>Boxy_refresh是在用户并没有通过这一关的时候刷新本关关卡重新开始游戏的,最主要就是其中的三句而已.</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">parent</span><span class="built_in">.</span>level<span class="built_in">.</span>DestroyLevel();	</span><br><span class="line"><span class="keyword">parent</span><span class="built_in">.</span>level<span class="subst">=</span><span class="literal">new</span> Boxy_Level(<span class="keyword">parent</span><span class="built_in">.</span>level_index,<span class="keyword">parent</span>);</span><br><span class="line"><span class="keyword">parent</span><span class="built_in">.</span>level<span class="built_in">.</span>InitialObject();</span><br></pre></td></tr></table></figure>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


      
    
      
        

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/2012/11/25/mfc_design_pattern_glit/">
                MFC之设计模式分析
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2012-11-25
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2012/11/25/mfc_design_pattern_glit/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/11/25/mfc_design_pattern_glit/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <h1 id="MFC之设计模式分析">MFC之设计模式分析</h1><p><img src="http://i.imgur.com/xPk2f.jpg" alt="all"></p>
<h2 id="程序的起点_命运之始">程序的起点 命运之始</h2><p>既然是C++程序,必然是由main函数(MFC中是WinMain)开始的.MFC作为一个成熟的软件框架,自然有着老练的一套-一个程序的实例需要有唯一的初始化(这里并不表示一个程序只能打开一次(即一个实例),仅能有一个实例这是通过自己重载initApplication实现的,但是这并不是其初衷).因此在程序尚未初始化的时候,就利用全局函数AfxGetApp取得该程序theApp的对象指针,然后用该指针指导后续界面,功能的加载.</p>
<p>显然,<strong>这里用的是Singleton模式</strong>.不直接对类进行初始化转而利用函数获得该类的指针以保证仅有一个实例.</p>
<blockquote>
<p><code>pApp-&gt;InitApplication()</code></p>
<p><code>pApp-&gt;InitInstance()</code></p>
</blockquote>
<p><img src="http://i.imgur.com/UPxku.jpg" alt="Imgur"></p>
<p>当然这里的Singleton和我们一般学习的不太相同,但是这也体现了设计模式并不是照搬的这一重要特点.设计模式并不是传统的模式,更应该说是一种设计思想,其实现方式可以各种各样.一般的Singleton采用将构造函数设置为protected,这样就可以避免client类错误初始化(Java Script就没有,所以需要用其他方法),然后设计一个静态static的指针返回该类指针.MFC中使用的更类似JS的方法:<code>ASSERT(AfxGetThread() == NULL);</code>.即,如果<code>AfxGetThread() == NULL</code>,那么初始化,否则失败.<br>借由Singleton模式,对程序进行初始化.基本顺序是<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. <span class="tag">pApp-</span>&gt;<span class="tag">InitInstance</span>()</span><br><span class="line">2. <span class="rule"><span class="attribute">CmyWinApp</span>:<span class="value">:<span class="function">InitInstance</span>() </span><br><span class="line">   &#123;</span><br><span class="line">	m_pMainWnd=new CMyFrameWnd</span></span>;</span><br><span class="line">   &#125;</span><br><span class="line">3. <span class="rule"><span class="attribute">CMyFrameWnd</span>:<span class="value">:<span class="function">Create</span>()&#123;<span class="function">CreateEx</span>()</span></span>;&#125;</span><br><span class="line">4. <span class="rule"><span class="attribute">CWnd</span>:<span class="value">:<span class="function">CreateEx</span>()&#123;<span class="function">PreCreateWindow</span>()</span></span>;&#125;</span><br></pre></td></tr></table></figure></p>
<p>由于有RTTI的原因,所以有很多地方就不需要用到常用的设计模式了,因为已经能够自己识别自己的类型,就不需要另外的抽象和实现的分离.简单说一下,RTTI分为两种,均用C风格的MACRO来编写,动态识别分别为<code>DECLARE_DYNAMIC</code>和 <code>IMPLEMENT_DYNAMIC</code>,动态创建为<code>DECLARE_DYNCREATE</code>和<code>IMPLEMENT_DYNCREATE</code>.这里主要讨论设计模式,所以对RTTI不作细究.当然RTTI贯穿整个MFC,是非常重要的元素.</p>
<p>另外,并不仅仅只有pApp才用了Singleton模式,其他的例如CDC也有使用.</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">void CScribbleView<span class="value">::<span class="function">OnDraw</span>(CDC* pDC)</span><br><span class="line">&#123;</span><br><span class="line">	CScribbleDoc* pDoc = <span class="function">GetDocument</span>();</span></span><br><span class="line">	<span class="function">ASSERT_VALID</span>(pDoc)<span class="comment">//(此处和ASSERT功能类似,都是通过宏来判定指针是否NULL,需不需要初始化)</span></span><br><span class="line">	<span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Document-View_牵一发发动全身">Document-View 牵一发发动全身</h2><p>Document为模式中的subject,负责管理数据,view则是observer,用于显示document中的数据,使用者通过view看到document,也可以通过view改变document,view是document对外显示的接口.但是,view并不是独立的,而是保存在document frame的窗口内的.当document变化的时候,就会调用updateAllView进行对所有观察者的更新.因为在单个view下可以有多个数据的存在,所以此时需要一种一对多的依赖关系,并且在document的状态改变的时候,所有依赖它的对象都会得到消息并且更新.这也是observer模式的初衷.<br><img src="http://i.imgur.com/pZ37k.jpg" alt="observer2"></p>
<p>后面根据具体代码分析.CFrameWnd(派生于CObject的类都可以接受消息,消息网路这里不讨论了)接受到系统发出的WM_CREATE消息,然后引发<code>CFrameWnd::OnCreate()-&gt;CFrameWnd::OnCreateHelper()-&gt;CFrameWnd::OnCreateClient()-&gt;CFrameWnd::CreateView()</code>;</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">void</span> CFrameWnd<span class="tag">::CreateView</span>(CCreateContext<span class="subst">*</span> pContext,<span class="built_in">..</span>)</span><br><span class="line">&#123;</span><br><span class="line">	CWnd<span class="subst">*</span> pView<span class="subst">=</span>(CWnd<span class="subst">*</span> ) pContext<span class="subst">-&gt;</span>m_pNewViewClass<span class="subst">-&gt;</span>CreateObject();</span><br><span class="line">	pView<span class="subst">-&gt;</span>Create(<span class="attribute">...</span><span class="built_in">.</span>)</span><br><span class="line">	<span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/8ZV9A.jpg" alt="observer"></p>
<p>建立了多个View以后,CDocument有m_ViewList维护一系列的View.CFrameWnd仅有CView* m_pViewActive.指示现在正在活动的View.如果CDocument发生改变,就会调用UpdateAllViews()函数,使整个m_ViewList里面的View都update.这就是observer模式了.</p>
<hr>
<h2 id="文件serialization_永久机制">文件serialization 永久机制</h2><p>MFC之所以为应用程序框架,一个重要的特征就是能够将管理数据和负责数据显示的代码分离开来.看到这个特征,很自然的想起Bridge这样一种模式.正如无数设计模式的书上说的一样,设计模式是一种思想,它不立足于实现,一个很简单的例子:你一看到刚才那个特征,你就应该反应到这是桥接模式,但是你可以不知道桥接模式是怎么实现的,你只需要先知道概念,通过需求推导出模式,后面才是实现细节.这才是设计模式的根本.<br><img src="http://i.imgur.com/4ScY9.jpg" alt="bridge"></p>
<p>CArchive和CFile的client类是CDocument.例如<code>CDocument::OnSaveDocument()</code>函数里面,</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">void CDocument<span class="value">::<span class="function">OnSaveDocument</span>(..)</span><br><span class="line">&#123;</span><br><span class="line">	CFile* pFile=<span class="function">GetFile</span>(...)</span><br><span class="line">	CArchive <span class="function">saveArchive</span>(pFile,CArchive::Store);</span></span><br><span class="line">	<span class="function">Serialize</span>(saveArchive);</span><br><span class="line">	<span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CArchive(实际上是文件缓冲区)和CFile之间的串行化设计采用了桥接模式.CArchive实现client需要的一系列接口(包括输入输出流的重载(&gt;&gt;&amp;&lt;&lt;)),数据则由CFile来操作,不考虑文件究竟以何种形式储存,数据的形式以及处理都是由CFile处理,实现了抽象于具体的分离.使得两个类CArchive和CFile可以在互不影响的情况下进行修改.所有需要写入文件读取文件的操作都在CArchive里面 ,它获得CFile作为参数,从而获取文件名,请求类型以及其他必要信息.</p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


      
    
  </div>

  
  <div class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">&raquo;</a>
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/images/aniki.png" alt="slixurd" />
          <p class="site-author-name">slixurd</p>
        </div>
        <p class="site-description motion-element"></p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">18</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </div>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/slixurd" target="_blank">Github</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://twitter.com/slixurd" target="_blank">Twitter</a>
            </span>
            
          
        </div>

        
        

      </div>

      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">slixurd</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.3"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.3"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.3" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  
  

  

    
      
    

    <script type="text/javascript">
      var disqus_shortname = 'slixurd';
      var disqus_identifier = 'page/3/index.html';
      var disqus_title = '';
      var disqus_url = '';

      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }());
    </script>
  





  
  

</body>
</html>
